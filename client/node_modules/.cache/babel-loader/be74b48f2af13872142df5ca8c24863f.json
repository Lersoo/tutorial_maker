{"ast":null,"code":"import _classCallCheck from\"/home/thomas/code/Lersoo/tutorial_maker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/thomas/code/Lersoo/tutorial_maker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/thomas/code/Lersoo/tutorial_maker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/thomas/code/Lersoo/tutorial_maker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import API from'../../utils/API';import Step from'../Steps/Step';var ShowTutorial=/*#__PURE__*/function(_Component){_inherits(ShowTutorial,_Component);var _super=_createSuper(ShowTutorial);function ShowTutorial(props){var _this;_classCallCheck(this,ShowTutorial);_this=_super.call(this,props);_this.fetchTutorial=function(tutorialId){API.fetchTutorial(tutorialId).then(function(response){console.log(response);_this.setState({tutorial:response.data});}).catch(function(error){console.log(error);});};_this.fetchSteps=function(tutorialId){API.fetchSteps(tutorialId).then(function(response){console.log(response.data);_this.setState({steps:response.data});}).catch(function(error){console.log(error);});};_this.deleteStep=function(stepId){API.deleteStep(stepId).then(function(response){console.log(response.data);_this.fetchSteps(_this.props.match.params.id);}).catch(function(error){console.log(error);});};_this.deleteTutorial=function(tutorialId){API.deleteTutorial(tutorialId).then(function(response){alert(response.data);window.location.pathname='/';}).catch(function(error){console.log(error);});};_this.state={tutorial:{},steps:[]};return _this;}_createClass(ShowTutorial,[{key:\"componentDidMount\",value:function componentDidMount(){var tutorialId=this.props.match.params.id;this.fetchTutorial(tutorialId);this.fetchSteps(tutorialId);}},{key:\"renderSteps\",value:function renderSteps(){var _this2=this;console.log(this.state.steps);return this.state.steps.map(function(_ref){var _id=_ref._id,step_description=_ref.step_description,step_media=_ref.step_media;return/*#__PURE__*/React.createElement(Step,{key:_id,_id:_id,step_description:step_description,step_media:step_media,deleteStep:_this2.deleteStep});});}},{key:\"render\",value:function render(){var _this3=this;var tutorial=this.state.tutorial;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,tutorial.tutorial_title),/*#__PURE__*/React.createElement(\"h2\",null,\"Steps\"),/*#__PURE__*/React.createElement(Link,{to:\"/tutorials/\".concat(tutorial._id,\"/steps/new\")},\"Add a step\"),/*#__PURE__*/React.createElement(Link,{onClick:function onClick(){return _this3.deleteTutorial(tutorial._id);}},\"Delete this tutorial\"),/*#__PURE__*/React.createElement(\"div\",{className:\"steps\"},this.renderSteps()));}}]);return ShowTutorial;}(Component);export{ShowTutorial as default};","map":{"version":3,"sources":["/home/thomas/code/Lersoo/tutorial_maker/client/src/components/Tutorials/ShowTutorial.jsx"],"names":["React","Component","Link","API","Step","ShowTutorial","props","fetchTutorial","tutorialId","then","response","console","log","setState","tutorial","data","catch","error","fetchSteps","steps","deleteStep","stepId","match","params","id","deleteTutorial","alert","window","location","pathname","state","map","_id","step_description","step_media","tutorial_title","renderSteps"],"mappings":"ooBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,GAAP,KAAgB,iBAAhB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,eAAjB,C,GAEqBC,CAAAA,Y,4GACnB,sBAAYC,KAAZ,CAAmB,8CACjB,uBAAMA,KAAN,EADiB,MAcnBC,aAdmB,CAcH,SAACC,UAAD,CAAgB,CAC9BL,GAAG,CAACI,aAAJ,CAAkBC,UAAlB,EACGC,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChBC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACA,MAAKG,QAAL,CAAc,CAAEC,QAAQ,CAAEJ,QAAQ,CAACK,IAArB,CAAd,EACD,CAJH,EAKGC,KALH,CAKS,SAAUC,KAAV,CAAiB,CACtBN,OAAO,CAACC,GAAR,CAAYK,KAAZ,EACD,CAPH,EAQD,CAvBkB,OAyBnBC,UAzBmB,CAyBN,SAACV,UAAD,CAAgB,CAC3BL,GAAG,CAACe,UAAJ,CAAeV,UAAf,EACGC,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACK,IAArB,EACA,MAAKF,QAAL,CAAc,CAAEM,KAAK,CAAET,QAAQ,CAACK,IAAlB,CAAd,EACD,CAJH,EAKGC,KALH,CAKS,SAAUC,KAAV,CAAiB,CACtBN,OAAO,CAACC,GAAR,CAAYK,KAAZ,EACD,CAPH,EAQD,CAlCkB,OAoCnBG,UApCmB,CAoCN,SAACC,MAAD,CAAY,CACvBlB,GAAG,CAACiB,UAAJ,CAAeC,MAAf,EACGZ,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACK,IAArB,EACA,MAAKG,UAAL,CAAgB,MAAKZ,KAAL,CAAWgB,KAAX,CAAiBC,MAAjB,CAAwBC,EAAxC,EACD,CAJH,EAKGR,KALH,CAKS,SAAUC,KAAV,CAAiB,CACtBN,OAAO,CAACC,GAAR,CAAYK,KAAZ,EACD,CAPH,EAQD,CA7CkB,OA+CnBQ,cA/CmB,CA+CF,SAACjB,UAAD,CAAgB,CAC/BL,GAAG,CAACsB,cAAJ,CAAmBjB,UAAnB,EACGC,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChBgB,KAAK,CAAChB,QAAQ,CAACK,IAAV,CAAL,CACAY,MAAM,CAACC,QAAP,CAAgBC,QAAhB,CAA2B,GAA3B,CACD,CAJH,EAKGb,KALH,CAKS,SAAUC,KAAV,CAAiB,CACtBN,OAAO,CAACC,GAAR,CAAYK,KAAZ,EACD,CAPH,EAQD,CAxDkB,CAEjB,MAAKa,KAAL,CAAa,CACXhB,QAAQ,CAAE,EADC,CAEXK,KAAK,CAAE,EAFI,CAAb,CAFiB,aAMlB,C,sFAEmB,CAClB,GAAMX,CAAAA,UAAU,CAAG,KAAKF,KAAL,CAAWgB,KAAX,CAAiBC,MAAjB,CAAwBC,EAA3C,CACA,KAAKjB,aAAL,CAAmBC,UAAnB,EACA,KAAKU,UAAL,CAAgBV,UAAhB,EACD,C,iDA8Ca,iBACZG,OAAO,CAACC,GAAR,CAAY,KAAKkB,KAAL,CAAWX,KAAvB,EACA,MACE,MAAKW,KAAL,CAAWX,KAAX,CAAiBY,GAAjB,CAAqB,cAA2C,IAAxCC,CAAAA,GAAwC,MAAxCA,GAAwC,CAAnCC,gBAAmC,MAAnCA,gBAAmC,CAAjBC,UAAiB,MAAjBA,UAAiB,CAC9D,mBACE,oBAAC,IAAD,EACE,GAAG,CAAEF,GADP,CAEE,GAAG,CAAEA,GAFP,CAGE,gBAAgB,CAAEC,gBAHpB,CAIE,UAAU,CAAEC,UAJd,CAKE,UAAU,CAAE,MAAI,CAACd,UALnB,EADF,CASD,CAVD,CADF,CAaD,C,uCAEQ,oBACCN,CAAAA,QADD,CACe,KAAKgB,KADpB,CACChB,QADD,CAEP,mBACE,4CACE,8BAAKA,QAAQ,CAACqB,cAAd,CADF,cAEE,sCAFF,cAGE,oBAAC,IAAD,EAAM,EAAE,sBAAgBrB,QAAQ,CAACkB,GAAzB,cAAR,eAHF,cAIE,oBAAC,IAAD,EAAM,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACP,cAAL,CAAoBX,QAAQ,CAACkB,GAA7B,CAAN,EAAf,yBAJF,cAKE,2BAAK,SAAS,CAAC,OAAf,EACG,KAAKI,WAAL,EADH,CALF,CADF,CAWD,C,0BAzFuCnC,S,SAArBI,Y","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport API from '../../utils/API';\n\nimport Step from '../Steps/Step';\n\nexport default class ShowTutorial extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tutorial: {},\n      steps: []\n    }\n  }\n\n  componentDidMount() {\n    const tutorialId = this.props.match.params.id;\n    this.fetchTutorial(tutorialId);\n    this.fetchSteps(tutorialId);\n  }\n\n  fetchTutorial = (tutorialId) => {\n    API.fetchTutorial(tutorialId)\n      .then(response => {\n        console.log(response);\n        this.setState({ tutorial: response.data });\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  fetchSteps = (tutorialId) => {\n    API.fetchSteps(tutorialId)\n      .then(response => {\n        console.log(response.data);\n        this.setState({ steps: response.data })\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  deleteStep = (stepId) => {\n    API.deleteStep(stepId)\n      .then(response => {\n        console.log(response.data)\n        this.fetchSteps(this.props.match.params.id);\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  deleteTutorial = (tutorialId) => {\n    API.deleteTutorial(tutorialId)\n      .then(response => {\n        alert(response.data)\n        window.location.pathname = '/';\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  renderSteps() {\n    console.log(this.state.steps)\n    return (\n      this.state.steps.map(({ _id, step_description, step_media }) => {\n        return (\n          <Step\n            key={_id}\n            _id={_id}\n            step_description={step_description}\n            step_media={step_media}\n            deleteStep={this.deleteStep}\n          />\n        )\n      })\n    )\n  }\n\n  render() {\n    const { tutorial, } = this.state\n    return (\n      <div>\n        <h1>{tutorial.tutorial_title}</h1>\n        <h2>Steps</h2>\n        <Link to={`/tutorials/${tutorial._id}/steps/new`}>Add a step</Link>\n        <Link onClick={() => this.deleteTutorial(tutorial._id)}>Delete this tutorial</Link>\n        <div className=\"steps\">\n          {this.renderSteps()}\n        </div>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}