{"ast":null,"code":"var _jsxFileName = \"/home/thomas/code/Lersoo/tutorial_maker/client/src/components/Tutorials/ShowTutorial.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport API from '../../utils/API';\nimport Step, { StepWrapper } from '../Steps/Step';\nimport styled from 'styled-components';\nimport { satin, candy } from '../../utils/colors';\nimport { Icon } from '../../utils/icons';\nconst Wrapper = styled('div')`\n  text-align: center;\n`;\nconst AddButton = styled(Link)`\n  color: ${satin};\n  transition: all 0.3s ease;\n  &:hover {\n    transform: translate(0, -0.3em);\n    color: ${candy};\n  }\n`;\nexport default class ShowTutorial extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      tutorial: {},\n      steps: []\n    };\n\n    this.fetchTutorial = tutorialId => {\n      API.fetchTutorial(tutorialId).then(response => {\n        this.setState({\n          tutorial: response.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    this.fetchSteps = tutorialId => {\n      API.fetchSteps(tutorialId).then(response => {\n        console.log(response.data);\n        this.setState({\n          steps: response.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    this.deleteStep = stepId => {\n      API.deleteStep(stepId).then(response => {\n        console.log(response.data);\n        this.fetchSteps(this.props.match.params.id);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    this.deleteTutorial = tutorialId => {\n      confirmAlert({\n        title: 'Confirm to submit',\n        message: 'Are you sure to do this ?',\n        buttons: [{\n          label: 'Yes',\n          onClick: () => API.deleteTutorial(tutorialId).then(response => {\n            window.location.pathname = '/';\n          }).catch(function (error) {\n            console.log(error);\n          })\n        }, {\n          label: 'No',\n          onClick: () => console.log('That was close!')\n        }]\n      });\n    };\n\n    this.renderSteps = () => {\n      console.log(this.state.steps);\n      return this.state.steps != 0 ? this.state.steps.map(({\n        _id,\n        step_description,\n        step_media\n      }) => {\n        return /*#__PURE__*/React.createElement(Step, {\n          key: _id,\n          _id: _id,\n          step_description: step_description,\n          step_media: step_media,\n          deleteStep: this.deleteStep,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }\n        });\n      }) : /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          'marginTop': '2em'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }\n      }, \"There are no steps for this tutorial yet.\");\n    };\n  }\n\n  componentDidMount() {\n    const tutorialId = this.props.match.params.id;\n    this.fetchTutorial(tutorialId);\n    this.fetchSteps(tutorialId);\n  }\n\n  renderAnchors() {\n    return this.state.steps.map(({\n      _id\n    }) => {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        href: `/steps/${_id}`,\n        key: _id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        className: \"material-icons\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }\n      }, \" panorama_fish_eye \"));\n    });\n  }\n\n  render() {\n    const {\n      tutorial\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Wrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }\n    }, \"Your tutorial : \", tutorial.tutorial_title), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }\n    }, \"Steps\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }\n    }, this.renderAnchors()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"steps\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }\n    }, this.renderSteps()), /*#__PURE__*/React.createElement(AddButton, {\n      to: `/tutorials/${tutorial._id}/steps/new`,\n      title: \"Add a step\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    }, \"add_circle\")), /*#__PURE__*/React.createElement(Link, {\n      onClick: () => this.deleteTutorial(tutorial._id),\n      title: \"Delete this tutorial\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, \" highlight_off \")));\n  }\n\n}","map":{"version":3,"sources":["/home/thomas/code/Lersoo/tutorial_maker/client/src/components/Tutorials/ShowTutorial.jsx"],"names":["React","Component","Link","confirmAlert","API","Step","StepWrapper","styled","satin","candy","Icon","Wrapper","AddButton","ShowTutorial","state","tutorial","steps","fetchTutorial","tutorialId","then","response","setState","data","catch","error","console","log","fetchSteps","deleteStep","stepId","props","match","params","id","deleteTutorial","title","message","buttons","label","onClick","window","location","pathname","renderSteps","map","_id","step_description","step_media","componentDidMount","renderAnchors","render","tutorial_title"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\n\nimport API from '../../utils/API';\n\nimport Step, { StepWrapper } from '../Steps/Step';\nimport styled from 'styled-components';\n\nimport { satin, candy } from '../../utils/colors';\nimport { Icon } from '../../utils/icons';\n\nconst Wrapper = styled('div')`\n  text-align: center;\n`\n\nconst AddButton = styled(Link)`\n  color: ${satin};\n  transition: all 0.3s ease;\n  &:hover {\n    transform: translate(0, -0.3em);\n    color: ${candy};\n  }\n`\nexport default class ShowTutorial extends Component {\n\n  state = {\n    tutorial: {},\n    steps: []\n  }\n\n  componentDidMount() {\n    const tutorialId = this.props.match.params.id;\n    this.fetchTutorial(tutorialId);\n    this.fetchSteps(tutorialId);\n  }\n\n  fetchTutorial = (tutorialId) => {\n    API.fetchTutorial(tutorialId)\n      .then(response => {\n        this.setState({ tutorial: response.data });\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  fetchSteps = (tutorialId) => {\n    API.fetchSteps(tutorialId)\n      .then(response => {\n        console.log(response.data);\n        this.setState({ steps: response.data })\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  deleteStep = (stepId) => {\n    API.deleteStep(stepId)\n      .then(response => {\n        console.log(response.data)\n        this.fetchSteps(this.props.match.params.id);\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  deleteTutorial = (tutorialId) => {\n    confirmAlert({\n      title: 'Confirm to submit',\n      message: 'Are you sure to do this ?',\n      buttons: [\n        {\n          label: 'Yes',\n          onClick: () => API.deleteTutorial(tutorialId)\n            .then(response => {\n              window.location.pathname = '/';\n            })\n            .catch(function (error) {\n              console.log(error);\n            })\n        },\n        {\n          label: 'No',\n          onClick: () => console.log('That was close!')\n        }\n      ]\n    });\n  }\n\n  renderSteps = () => {\n    console.log(this.state.steps);\n    return (\n      this.state.steps != 0\n        ?\n        (this.state.steps.map(({ _id, step_description, step_media }) => {\n          return (\n            <Step\n              key={_id}\n              _id={_id}\n              step_description={step_description}\n              step_media={step_media}\n              deleteStep={this.deleteStep}\n            />\n          )\n        }))\n        : <p style={{ 'marginTop': '2em' }}>\n          There are no steps for this tutorial yet.\n        </p>\n    )\n  }\n\n\n  renderAnchors() {\n    return (\n      this.state.steps.map(({ _id }) => {\n        return (\n          <a href={`/steps/${_id}`} key={_id}>\n            <Icon className=\"material-icons\"> panorama_fish_eye </Icon>\n          </a>\n        )\n      })\n    )\n  }\n\n  render() {\n    const { tutorial } = this.state\n    return (\n      <Wrapper>\n        <h1>Your tutorial : {tutorial.tutorial_title}</h1>\n        <h2>Steps</h2>\n        <div>{this.renderAnchors()}</div>\n        <div className=\"steps\">\n          {this.renderSteps()}\n        </div>\n        <AddButton\n          to={`/tutorials/${tutorial._id}/steps/new`}\n          title='Add a step'\n        >\n          <Icon className=\"material-icons\">add_circle</Icon>\n        </AddButton>\n        <Link\n          onClick={() => this.deleteTutorial(tutorial._id)}\n          title='Delete this tutorial'\n        >\n          <Icon className=\"material-icons\"> highlight_off </Icon>\n        </Link>\n      </Wrapper>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}