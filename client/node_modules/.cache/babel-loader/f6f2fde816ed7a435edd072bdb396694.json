{"ast":null,"code":"import _classCallCheck from\"/home/thomas/code/Lersoo/tutorial_maker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/thomas/code/Lersoo/tutorial_maker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/thomas/code/Lersoo/tutorial_maker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/thomas/code/Lersoo/tutorial_maker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Axios from'axios';import{Link}from'react-router-dom';var ShowTutorial=/*#__PURE__*/function(_Component){_inherits(ShowTutorial,_Component);var _super=_createSuper(ShowTutorial);function ShowTutorial(props){var _this;_classCallCheck(this,ShowTutorial);_this=_super.call(this,props);_this.state={tutorial:{},steps:[]};return _this;}_createClass(ShowTutorial,[{key:\"componentDidMount\",value:function componentDidMount(){var tutorialId=this.props.match.params.id;this.fetchTutorial(tutorialId);this.fetchSteps(tutorialId);}},{key:\"fetchTutorial\",value:function fetchTutorial(tutorialId){var _this2=this;Axios.get(\"api/tutorials/\".concat(tutorialId)).then(function(response){_this2.setState({tutorial:response.data});}).catch(function(error){console.log(error);});}},{key:\"fetchSteps\",value:function fetchSteps(tutorialId){var _this3=this;Axios.get(\"api/tutorials/\".concat(tutorialId,\"/steps\")).then(function(response){_this3.setState({steps:response.data});}).catch(function(error){console.log(error);});}},{key:\"deleteStep\",value:function deleteStep(stepId){var _this4=this;Axios.delete(\"api/steps/\".concat(stepId)).then(function(response){console.log(response.data);_this4.fetchSteps(_this4.props.match.params.id);}).catch(function(error){console.log(error);});}},{key:\"renderSteps\",value:function renderSteps(){var _this5=this;return this.state.steps.map(function(_ref){var _id=_ref._id,step_description=_ref.step_description,step_media=_ref.step_media;return/*#__PURE__*/React.createElement(\"div\",{className:\"step\",key:_id},step_description,/*#__PURE__*/React.createElement(\"img\",{src:step_media,alt:step_description}),/*#__PURE__*/React.createElement(\"p\",{onClick:function onClick(){return _this5.deleteStep(_id);}},\"Delete this step\"));});}},{key:\"render\",value:function render(){var tutorial=this.state.tutorial;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,tutorial.tutorial_title),/*#__PURE__*/React.createElement(\"h2\",null,\"Steps\"),/*#__PURE__*/React.createElement(Link,{to:\"/tutorials/\".concat(tutorial._id,\"/steps/new\")},\"Add a step\"),/*#__PURE__*/React.createElement(\"div\",{className:\"steps\"},this.renderSteps()));}}]);return ShowTutorial;}(Component);export{ShowTutorial as default};","map":{"version":3,"sources":["/home/thomas/code/Lersoo/tutorial_maker/client/src/components/show_tutorial.component.jsx"],"names":["React","Component","Axios","Link","ShowTutorial","props","state","tutorial","steps","tutorialId","match","params","id","fetchTutorial","fetchSteps","get","then","response","setState","data","catch","error","console","log","stepId","delete","map","_id","step_description","step_media","deleteStep","tutorial_title","renderSteps"],"mappings":"ooBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,C,GAEqBC,CAAAA,Y,4GACnB,sBAAYC,KAAZ,CAAmB,8CACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,QAAQ,CAAE,EADC,CAEXC,KAAK,CAAE,EAFI,CAAb,CAFiB,aAMlB,C,sFAEmB,CAClB,GAAMC,CAAAA,UAAU,CAAG,KAAKJ,KAAL,CAAWK,KAAX,CAAiBC,MAAjB,CAAwBC,EAA3C,CACA,KAAKC,aAAL,CAAmBJ,UAAnB,EACA,KAAKK,UAAL,CAAgBL,UAAhB,EACD,C,oDAEaA,U,CAAY,iBACxBP,KAAK,CAACa,GAAN,yBAA2BN,UAA3B,GACGO,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChB,MAAI,CAACC,QAAL,CAAc,CAAEX,QAAQ,CAAEU,QAAQ,CAACE,IAArB,CAAd,EACD,CAHH,EAIGC,KAJH,CAIS,SAAUC,KAAV,CAAiB,CACtBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CANH,EAOD,C,8CAEUZ,U,CAAY,iBACrBP,KAAK,CAACa,GAAN,yBAA2BN,UAA3B,YACGO,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChB,MAAI,CAACC,QAAL,CAAc,CAAEV,KAAK,CAAES,QAAQ,CAACE,IAAlB,CAAd,EACD,CAHH,EAIGC,KAJH,CAIS,SAAUC,KAAV,CAAiB,CACtBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CANH,EAOD,C,8CAEUG,M,CAAQ,iBACjBtB,KAAK,CAACuB,MAAN,qBAA0BD,MAA1B,GACGR,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChBK,OAAO,CAACC,GAAR,CAAYN,QAAQ,CAACE,IAArB,EACA,MAAI,CAACL,UAAL,CAAgB,MAAI,CAACT,KAAL,CAAWK,KAAX,CAAiBC,MAAjB,CAAwBC,EAAxC,EACD,CAJH,EAKGQ,KALH,CAKS,SAAUC,KAAV,CAAiB,CACtBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAPH,EAQD,C,iDAEa,iBACZ,MACE,MAAKf,KAAL,CAAWE,KAAX,CAAiBkB,GAAjB,CAAqB,cAA2C,IAAxCC,CAAAA,GAAwC,MAAxCA,GAAwC,CAAnCC,gBAAmC,MAAnCA,gBAAmC,CAAjBC,UAAiB,MAAjBA,UAAiB,CAC9D,mBACE,2BAAK,SAAS,CAAC,MAAf,CAAsB,GAAG,CAAEF,GAA3B,EACGC,gBADH,cAEE,2BAAK,GAAG,CAAEC,UAAV,CAAsB,GAAG,CAAED,gBAA3B,EAFF,cAGE,yBAAG,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACE,UAAL,CAAgBH,GAAhB,CAAN,EAAZ,qBAHF,CADF,CAOD,CARD,CADF,CAWD,C,uCAEQ,IACCpB,CAAAA,QADD,CACc,KAAKD,KADnB,CACCC,QADD,CAEP,mBACE,4CACE,8BAAKA,QAAQ,CAACwB,cAAd,CADF,cAEE,sCAFF,cAGE,oBAAC,IAAD,EAAM,EAAE,sBAAgBxB,QAAQ,CAACoB,GAAzB,cAAR,eAHF,cAIE,2BAAK,SAAS,CAAC,OAAf,EACG,KAAKK,WAAL,EADH,CAJF,CADF,CAUD,C,0BAxEuC/B,S,SAArBG,Y","sourcesContent":["import React, { Component } from 'react'\nimport Axios from 'axios';\nimport { Link } from 'react-router-dom';\n\nexport default class ShowTutorial extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tutorial: {},\n      steps: []\n    }\n  }\n\n  componentDidMount() {\n    const tutorialId = this.props.match.params.id;\n    this.fetchTutorial(tutorialId);\n    this.fetchSteps(tutorialId);\n  }\n\n  fetchTutorial(tutorialId) {\n    Axios.get(`api/tutorials/${tutorialId}`)\n      .then(response => {\n        this.setState({ tutorial: response.data })\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  fetchSteps(tutorialId) {\n    Axios.get(`api/tutorials/${tutorialId}/steps`)\n      .then(response => {\n        this.setState({ steps: response.data })\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  deleteStep(stepId) {\n    Axios.delete(`api/steps/${stepId}`)\n      .then(response => {\n        console.log(response.data)\n        this.fetchSteps(this.props.match.params.id);\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  renderSteps() {\n    return (\n      this.state.steps.map(({ _id, step_description, step_media }) => {\n        return (\n          <div className=\"step\" key={_id}>\n            {step_description}\n            <img src={step_media} alt={step_description} />\n            <p onClick={() => this.deleteStep(_id)}>Delete this step</p>\n          </div>\n        )\n      })\n    )\n  }\n\n  render() {\n    const { tutorial } = this.state\n    return (\n      <div>\n        <h1>{tutorial.tutorial_title}</h1>\n        <h2>Steps</h2>\n        <Link to={`/tutorials/${tutorial._id}/steps/new`}>Add a step</Link>\n        <div className=\"steps\">\n          {this.renderSteps()}\n        </div>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}