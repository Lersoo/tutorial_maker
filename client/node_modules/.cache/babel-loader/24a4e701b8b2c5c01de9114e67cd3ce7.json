{"ast":null,"code":"var _jsxFileName = \"/home/thomas/code/Lersoo/tutorial_maker/client/src/components/Tutorials/ShowTutorial.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport API from '../../utils/API';\nimport Step, { StepWrapper } from '../Steps/Step';\nimport styled from 'styled-components';\nimport { satin, candy } from '../../utils/colors';\nconst Wrapper = styled('div')`\n  text-align: center;\n`;\nconst AddButton = styled(Link)`\n  color: ${satin};\n  box-shadow: 0 1em 1em ${satin};\n  &:hover {\n    color: ${candy}\n  }\n`;\nexport default class ShowTutorial extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      tutorial: {},\n      steps: []\n    };\n\n    this.fetchTutorial = tutorialId => {\n      API.fetchTutorial(tutorialId).then(response => {\n        this.setState({\n          tutorial: response.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    this.fetchSteps = tutorialId => {\n      API.fetchSteps(tutorialId).then(response => {\n        console.log(response.data);\n        this.setState({\n          steps: response.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    this.deleteStep = stepId => {\n      API.deleteStep(stepId).then(response => {\n        console.log(response.data);\n        this.fetchSteps(this.props.match.params.id);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    this.deleteTutorial = tutorialId => {\n      API.deleteTutorial(tutorialId).then(response => {\n        alert(response.data);\n        window.location.pathname = '/';\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    this.renderSteps = () => {\n      console.log(this.state.steps);\n      return !this.state.steps ? this.state.steps.map(({\n        _id,\n        step_description,\n        step_media\n      }) => {\n        return /*#__PURE__*/React.createElement(Step, {\n          key: _id,\n          _id: _id,\n          step_description: step_description,\n          step_media: step_media,\n          deleteStep: this.deleteStep,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }\n        });\n      }) : /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          'margin-top': '2em'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }\n      }, \"There are no steps for this tutorial yet.\");\n    };\n  }\n\n  componentDidMount() {\n    const tutorialId = this.props.match.params.id;\n    this.fetchTutorial(tutorialId);\n    this.fetchSteps(tutorialId);\n  }\n\n  renderAnchors() {\n    return this.state.steps.map(({\n      _id\n    }) => {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        href: `/steps/${_id}`,\n        key: _id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"material-icons\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }\n      }, \" panorama_fish_eye \"));\n    });\n  }\n\n  render() {\n    const {\n      tutorial\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Wrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }, \"Your tutorial : \", tutorial.tutorial_title), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    }, \"Steps\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }\n    }, this.renderAnchors()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"steps\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }\n    }, this.renderSteps()), /*#__PURE__*/React.createElement(AddButton, {\n      to: `/tutorials/${tutorial._id}/steps/new`,\n      title: \"Add a step\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }, \"add_circle\")), /*#__PURE__*/React.createElement(Link, {\n      to: \"\",\n      onClick: () => this.deleteTutorial(tutorial._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    }, \" highlight_off \")));\n  }\n\n}","map":{"version":3,"sources":["/home/thomas/code/Lersoo/tutorial_maker/client/src/components/Tutorials/ShowTutorial.jsx"],"names":["React","Component","Link","API","Step","StepWrapper","styled","satin","candy","Wrapper","AddButton","ShowTutorial","state","tutorial","steps","fetchTutorial","tutorialId","then","response","setState","data","catch","error","console","log","fetchSteps","deleteStep","stepId","props","match","params","id","deleteTutorial","alert","window","location","pathname","renderSteps","map","_id","step_description","step_media","componentDidMount","renderAnchors","render","tutorial_title"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport API from '../../utils/API';\n\nimport Step, { StepWrapper } from '../Steps/Step';\nimport styled from 'styled-components';\n\nimport { satin, candy } from '../../utils/colors';\n\nconst Wrapper = styled('div')`\n  text-align: center;\n`\n\nconst AddButton = styled(Link)`\n  color: ${satin};\n  box-shadow: 0 1em 1em ${satin};\n  &:hover {\n    color: ${candy}\n  }\n`\nexport default class ShowTutorial extends Component {\n\n  state = {\n    tutorial: {},\n    steps: []\n  }\n\n  componentDidMount() {\n    const tutorialId = this.props.match.params.id;\n    this.fetchTutorial(tutorialId);\n    this.fetchSteps(tutorialId);\n  }\n\n  fetchTutorial = (tutorialId) => {\n    API.fetchTutorial(tutorialId)\n      .then(response => {\n        this.setState({ tutorial: response.data });\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  fetchSteps = (tutorialId) => {\n    API.fetchSteps(tutorialId)\n      .then(response => {\n        console.log(response.data);\n        this.setState({ steps: response.data })\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  deleteStep = (stepId) => {\n    API.deleteStep(stepId)\n      .then(response => {\n        console.log(response.data)\n        this.fetchSteps(this.props.match.params.id);\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  deleteTutorial = (tutorialId) => {\n    API.deleteTutorial(tutorialId)\n      .then(response => {\n        alert(response.data)\n        window.location.pathname = '/';\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  renderSteps = () => {\n    console.log(this.state.steps);\n    return (\n      !this.state.steps\n        ?\n        (this.state.steps.map(({ _id, step_description, step_media }) => {\n          return (\n            <Step\n              key={_id}\n              _id={_id}\n              step_description={step_description}\n              step_media={step_media}\n              deleteStep={this.deleteStep}\n            />\n          )\n        }))\n        : <p style={{ 'margin-top': '2em' }}>\n          There are no steps for this tutorial yet.\n        </p>\n    )\n  }\n\n\n  renderAnchors() {\n    return (\n      this.state.steps.map(({ _id }) => {\n        return (\n          <a href={`/steps/${_id}`} key={_id}>\n            <span className=\"material-icons\"> panorama_fish_eye </span>\n          </a>\n        )\n      })\n    )\n  }\n\n  render() {\n    const { tutorial } = this.state\n    return (\n      <Wrapper>\n        <h1>Your tutorial : {tutorial.tutorial_title}</h1>\n        <h2>Steps</h2>\n        <div>{this.renderAnchors()}</div>\n        <div className=\"steps\">\n          {this.renderSteps()}\n        </div>\n        <AddButton\n          to={`/tutorials/${tutorial._id}/steps/new`}\n          title='Add a step'\n        >\n          <span className=\"material-icons\">add_circle</span>\n        </AddButton>\n        <Link to='' onClick={() => this.deleteTutorial(tutorial._id)}>\n          <span className=\"material-icons\"> highlight_off </span>\n        </Link>\n      </Wrapper>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}